# Automatically generated on 2020-02-17 UTC from https://codemagic.io/app/5e24a09fc5faa64b1227a8bf/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    environment:
      vars:
        FIREBASE_ANDROID: Encrypted(Z0FBQUFBQmVTc1hJZ1o4aU9NN2JZeDNKTEwxS2RDRURTVWV1SmE3LWl2aV94LUlPZ3RzbDlSdEY1ZUhYNTE0MEV0SGd2aWQ2cmRtM3diSlhvUUlhVHdpN1I5UWNIT2k0YVQtczJaM29tb2FXN2NrSWVQdFhManNlenVFOHl6b1Z4V0s1UThVdWRPTnE2QVVrYXJfdGNSdk1Cck91US10S2lNX2VCaUhIMnlGbnRwZm16LXBaVDZlTUVYUW15YnJycmhEUjQwMnpHeXYwMmU0YTI3c3hvREp4bWs3ZTctQVBZQmJ6dkczRkNpMk5zNjdkWG1PRHkxYy1NOUhQbTllcTNPTm5IT2VVX0tlazN4andFTThhWXBjWGxiT2gtN0tZaXh6MThZd0RmaEVFRWZ2dktqOTJha0V3ZzYwTWtpN0NlV0Z5d3BDM1RZZHJyamdXOHU1ZTQwUDBwbXJ5bXNxOGtKaFZlUGs1anhtbEZqVGFES0ZVeG1laHJvQllaRkxESFh5VW5Nb3NVRnozbWhDQzdibzBkQlVvcElfRlJpRFJLY2lOZ0ZaX1h4cFlhOURKLV9qLXVRNEhVN2tzUW9UVjVjQ3BrM1lYam9aeF9idmloNTREVlpJdTJ5aWhzMHVra1BFSHNud0ZGWTk0Zk5vWEFSTnZDU1cyQk1jX2dYcUY4b2FYUkV1R01kTno0d3Q4TDEwVGE2eXdJRlFjel9sejZmWkx5c1pqdThIVE0xWXFoLUdsUC1IZHZhT2xjVjhsSXFfUkRzc2Y5X3YxUzVvbDhYU29SVngtaE5hellGQ1ZpTEh1eGpYTy1pdnhqRi1WRm1KMzNRa0xvQk80WFBnSmlSSzFuS2NBbGw2NGhCZDExRXhoRl9XcDlzRDlOOVdkblhiU0lxZlJtWnljbFpMVExHbDE1OE1oNWgxQnpWYzJFZVBzSEVuZERPVzRxX0xiWEVyR0xzRTY5LXMwbV9PN08wRVVOaVNkLUswOFhEVkJvV2hpNmVLUU80NkdxUGV2RnIwSWdibVFtS21Oa1J1NE4tcmZidVduNXhodHJWaC1BUGlocVVqMlJCdUN5bWtNQk5WV1ZFSWRjajBNZGdaMEdFcEJPYkcya1ZaZTFsSFRrVno0QWNLUWdmRW5IczJBaFhwcVppY2o5SHJWaEdaODFnMExpYVQ0QkU0Z2RnZnJBWHBCUWVXc2JLMnRCX1g3d0JHbkpqTG1iQUQ0UC04VTFWZUZ2ajFxY00xSkQwdGNSVUhnSEF6Y0xJTnVpaTROOXdXX1F2NEZ6VzFvM2s0NzRHSE1GRExRTzVuRDVyWjZ0cVdpRGlCLXdlQ1VvcGo4OXZURU51cmdJZzkwVnVPV0NVVzlTR2N0ZkpKMFRZXzBkTU91UUdNUFJ1dnFwOFFBT0NibTN1RWlpZ09RUHZHWUk4SlFlaHNRN2tjQUVLeERDVkQzVXhQbFk0eWh6cWdpQmtQMlJZNV9QNlJqVm1EejlhVjBQeWYwUGlLUU53a1prN21IR3FoczRCdzFpSUM1cEpWRjZGNjNtcjQyNFBHYUlJREg2R2wzdnlFOElYLURFenl1MUQyMG9KcUdzZGNaRGZpTDRZUVNBYjdXN0Q3WDltTWdKY1ExcjhMdG84S05GS1BHeUNUS0lpNHBGQTgtN0JOS0o5TkhHQUJtQjNBNFE1R0piRGpab3hEOXRtbXVpaVZldkcydnU5WjlKQUV2ZW5TdjdHdFFpb2tRNGhQVGJmeW1LVEVJcEFuTFdPSkpaeG5lbFlKS3N5RTZfQlVGM29scUotY2tFZHVSRDRGbXB2T2lxNmYtV0NPb2dWUld2MlBscmRyaElGc2paYnBIazRWblFOdkNDT09UbGNIQ2hBUnhpSjZkdFNpcDlzbmRhcWh3cjBWQmZWdGxYVm9lQmVNa25GcF94MlZhRXlFQjVJM2x0TDNiMm9CUXpLa2NQWWdaSDF2QnktaV9XSFJJMWNVQTdlUE1UYzgyY1VIX1NwV21WRzh2bEFiZFVjZW1vYUNOMC00THJwUXVlYzAtMXJCZVhnNEw5TUFuQmdkLTE1blZXS3BPWlM3RW9nQ29Hc3NaRlZwTmxfY2RmN1BBUTBBbDNLbXJ1YUpIZEVySWRWTGpZblZxeXdKYlNXLXA1aGFRc3dyS3JBZnZSVHl0LUFoOHd2Z3VuTnZUMEctMEVMczJDRlZKdmdXN0ctT25VMXRfc0JON3FQY0d5YWFXWVg2WjlYX0JyTVBvcC0zRzA2WDFaMVRsN1pabURLakd0UzVkRTA1YUF6Y1pQZGhTa0RWa1IzcmtHbXFNd0c0aUZlUVJGTDNpcjQ2MXlUREJXVVcwRHM4dXZyZXRyRzNQM2VIUjRHcDZHclFBVHExb3FkUFVZU3A0TTRNa0ROZWpRNHJObjU0WUc0RFQyYWh5TXkxX0pkbjE3ZVVzaW5HOHBCY1RKUFNIS0h3RTJlZTZ6OFRsSXpxeGlTazl4REQ1LWFaZFRwbUdvU2JxLVhUSDgwTkJZcWtPakRNUGZXWTlETTNQbnkzc05vMVFfU2c5Sy1kc2V3cmhQQUtQbHd6Qm1xejQ5RHFEVEhJZXNVRzQ5UVJWd182LVRPS09vM3VJZG9uNlNGcUl2OE5LallQTnhOSGhuZUN0SWExcHJ1bHRaeUtyQmpoUlJUa2hMbkVqLVdtRXNFbXBPdlNhTHRCWEdnT0VUaG1GRnFmVVc2djhrZVNobUFwS2lxZE5Wc3h2MXJ1WTk5enZJVTZ4dHhrMGgzZUdzUGthUDFGR1FtbGt4N2szRml5dTJPMnd1ZDNSdVNpbFZSNzFDVFI2VTI2M09ZY1BtYnVZeGo1MVlyOTYybXNXbVdqdkNUcTk0ZXVkelBiRFdNTWdOcURFaExuMkdDUUk5cmx3ZmlmdWNvZFNSY3JWcE9GRWVybktGTDRYSUlkWVNtWWJLZ1c0d1hHZjhWdkxKZ1RRQVR1eG9ZNERnM2k3OVJzaFM4ZGlTTDU1S1pwNzgzLWRMRFBJVUpYY2M1a2R0bGo0bXI0QXRROEVSQXJKUVQyQUQ5RzBtRkxyWkczclZNaEVHbkhvWm9KMDFVM2h0djJxY194dUJwQkpEM1A3SlRNVnptOFZGalpIRUgzajMzZ2ZLVW9pcjJQeHNxY3Z0aTVHaEFuWDN4aU9GZ2J0OENad1MxS25SX0lEbzZMSlRVV2w5NDdNa3hfXzRnbkFGd0VCckFaMWFKODN6T0ZuSkRaRWFYZ3ZKSy0zcHB4cjMzbHBPZjIzSjdDd1N2Mk1ramthNC16Mkl4ZU1QanI1SHBzTzhoWGhsT1AzQ2tHQVFjZWFFbVpELXV1eHNnZlR2SWhXWGg1MjBwcmQ2bU42VnV4cW9kSmVwZU9JcFNtS1JIU0VRLVR2WERxQXlNNGE2ODNuX0tjNk9mUFpkVkRFQ1ZZR01qOVB0a1p3bDFfM3hNajAyWXNscEJRdGllTG5WUl9sMlRsLUVOcUpNTklNamVGVlVkWXIxVC1WNmdNdng0aEwzQVo0dU9JWnh0TjA4NzVJZlA0LTl3dzNlWmFLR2NieTJWcTdaSi1pNktlaEMySXFkaWtsV1hGSF93VDlTVGlZMVVPTU5KUDZ4djV2dnR4SVZRUVdIZV9lQmNaZ3djRThXbGdzRXJUekhRR3VmT0dUU0p1cURnMEVMWllERDdSX3Vwa0cyNkoxNkdOQ1BpS2ozbFVZTDlpeWhUTTBienRUUFBTT3R2a3NYZmMyLUpHbExLeTJTZHZsWC1jU0dsU2xTQno4a1hpbVFMcUdfTF9JSkVQZUY2bGlzTGZhXzlISTN2di13OFYwUXFuZjBLZmNFeEdjbWlraWFzUnpIUEpfTDZCcTg3dk91bUg5UmNhLWVyenhELV83c1FRcEU4SHF1SXE4YUdzQ1BkWGI4VTNVWDhYd1MyVzRfR1loQnFSR2QzZWZRVU5hV2JRQk1CRFZfRGJKcWxVMHpuRFFQTmJTdXE2V2dhc3BBeTg2TjZuV1prcnRwcm1NNEVDa1pVSmNDZVlRMHN5ZFV0aVNDX0RsY1cxcFFaTE84Z24yeTZLZ3BLcXpDNEV3N0IzbGN1NlJQZ1F6cVdlYUNOclJzbmhlT3lrNk5BdG54Zz09)
      flutter: stable
      xcode: latest
    cache:
      cache_paths:
        - $FCI_BUILD_DIR/build
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: master
          include: true
          source: false
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/app/android/local.properties"
      - cd app && flutter packages pub get
      - |
        #!/bin/sh
        echo $FIREBASE_ANDROID | base64 --decode > $FCI_BUILD_DIR/app/android/app/google-services.json
      - cd app && flutter build apk --release
    artifacts:
      - app/build/**/outputs/**/*.apk
      - app/build/**/outputs/**/*.aab
      - app/build/**/outputs/**/mapping.txt
      - app/flutter_drive.log
    publishing:
      email:
        recipients:
          - rguillot42@gmail.com
  dev:
    name: dev
    environment:
      vars:
        FIREBASE: Encrypted(Z0FBQUFBQmVTc1hJNF9JYlR1NEtsaHFHU3BzMHUwNDVtdXlVS2tfODA4cHFKYUs0QUo2bEJOSkkwckVQYm9JR25wRFUzSWdBNXF3Q3o0UlZILVNxY3ZIS1hTS2Zqd2owb2hTZnR3Zl9BdlV2QTJ6czQyZEZKWnFnaWprSURTekxlTDEteFRORU00cncwclNtYXRVQ3JJWDduaFpHYzduQ0g2bmNnbGN4VkNiN3ZTZVkwUWVNVjFoQ1FlT0RfWEdqZjF6QnJKNjRyeGhxZndEV3UtdWFJME5tY3RFcVlJOEV4YTg2Nm5EYzNFczhWOHprM1ZDSEZMMVU0clNyWlN2YmthMC02c29WNFE5aG8wUFJDSDl1RmZ0cHJCaUdKcS1xcUlpYXZtd3RTX1FNR0M0ek5CYXhNZEY3X0J3ckE2QjlTblgyczJPcVhmREtoeUZ4bktDZ01VdFFULXlDaDgxbjVHRUM4T0plakFNdnNnLTBSNFEzTUU4Ukd3VWdGOWx4ZVFuNktJWVFiUTNjWm91eDI5bUQ4eFlRcHlTTUNSRnpWZVB4VXhsMEN1TDRzYnFfWVljLW11aHVwNUdNczljOG5XVmsxdkJDRkw0THlTdzdWbWRoTmo0d3Z4VTVXNmtPdnZhSDNHd0tSWlFnSjlzUFFNTzhCdjdZR2VfREFVMldSUDdsLXR0UjVjaTllZGN2MHR3OVZENkgzQWZ6bHZ5WUduTmNBYjJBaW5zT2xSR0RMbTBYY0tTMHh4bzBsa2FDYlRiZVMxME54dHpiU1lnWFByVk1nS0FyOEF5ekp1dUJCVkJfZVcxLUh1ZVdvYlNJM3JCeTRya3pZVTIwLVBsT1QzYm1hTXFFNnEtblRIM3g3S0V6eVBMQjFMWW5pVW5MTHpDektEdmtUQ2E1WEpzQWp3Ti1fX3hfQVkwZTJzLWhPMFlxZnJkLURJdGR2bUQzN0Jqd3hDUldTN1J6R2NkU0lMVGhEMWlob0dyOFBReXlpNThtZ19mRzdqcFBzckhJTEh0Mm9BbGRjNl9rOWR3RER0My1CdGdGdEJhb0YyZDBiVmtsbTVzQUUtRTR4SF9UX3J1OFZPenA5Zi00dDN0RnlWXzFTSjRxRWQ3MnVIR0Y5RUFKOGlXOFhkLVA3bHU4bmRlV3dNVGgtc0szVzI1ZHhoTW54QjNzbWM5Y2RiZWRmSGpObmNoWEdLQmFSdEdQYjdkTDF5ZGdYZG9kbXAzSjlLekh5YTlWRXREdHFNeXJpa3JrdG9lOE5DeEt5TzZYdW9jdGFlTkVDQWdYajJqbk1Dc3d0NkR3ZGJEVm5pWW0wdEN3NXBlZDJBSVNjdWhfQlJTYUh4OVJXcU5JQ1pqRlAzWGtzZnQtVEFCSWg4VFRFN1hHcWdkNlpVWkJqTmxkaGJobHp4M2lTRVg0LUZZRWc2dVFoNkZfT0xuSjJJdDRFam4yRUlsXzRaeEhWTkhzMGZ3eWgzX3lQTU0tVGV2d29ndE0yNk9DbWJMZEdXSHZLaTFpMmxicVlFcFF4WnQ5N29uZGJGa2g2MEFJZVZiN09weWVWWXZkVGEtNjJwblE5N3RxUEk5V19XUWF1Qk0yNXhFZE9UbG81dUFoNjZvS3RMNnB4bFFrU2FkcC1SR2twZzNiQkJ6THhZXzFaSE1BMTRYLUJ0UVJUd29kWE0xR09pN0IxQmdZS0pSMzl0ekJpalF5OE1Qd2JNdnhYb1MwMXBmTjltRGdSdmVVbm5pb1NoRXc3c0ZwTnk5ZUJVUnhlRzZRNDlsYU90RVlXMUh3RmotbG0xS3F3UzVDc2t4YmF3Vjh4bXNXRVFEemItd0xfWlp0YmNkSHFyUW9aSGotWkhHXzk0YktMMElkWnlUMm5iS1BreDlsSnBEOTQ1LVlxbXVqZ1hubk54MTM5QmY1bmJQMFV1NFFjWEZHT3VMSlRWRU1meW1pRm9NRXVwNWkwdXkxLTMtOTZkS2pieXdTdkZhSmR6YkY4N0ZXNndTZThWdTFqNGtWNFJIYnM2R0RlTmhQaHlUd1VUam84M2NEektnNWQ3b1lwc1dGdjhlc0Z3eDJPcVVONmd6Ymg1TkJOcG9YV2o1d2hjOVRIQzQtMGU4RnpoZDZWZ3VJQzVYTXhERGYxRnpYZ3RRT3NFVWlqVm1NdVVVQ1czRXhkUUNPLUFBOVZMUS1fRW02bVNWMlNrMzVnRzdhZXJwT2NBMXU1cS10bXJ2R3Z3aWR1aTdCR1hTSks4TmlqcTV5UERPVXdrVTFDWThMMTdqcTVGcnNzV0RsbHFHWU1EX2RlbTdvdWtUaTJCTG1EaWxzRXloYXp0MnpuT1phUkRBVW1nQVRkVjJxcE0zNG53MTBMYlRvVmVObFdSNXF6bWNGdW90cWxVQzg2d2JTSDZ1QmlSOUlCTmZYQmJPb3RHTFNqYl8zTkNDVWNMZlc3NW5iR01xT3hIcE9lR3FkcUc2cmZKb2RZU21GbHEwWVNZTTlydS0xWnJSNTJrVkxhekNEa016b1laRzdXZkNGcVdvUFJ1WFYySkRBaUVXcVFNTVNuVXd6ZjNKY21RWDQ3YUx3S3BzT0s1b2V5X0JMU21Pdl9fX1hkZDlEdVl2VHhRLTJQXy1heURsQ3d2dz0=)
      flutter: v1.15.4-pre.70
      xcode: latest
    cache:
      cache_paths:
        - $FCI_BUILD_DIR/build
    triggering:
      events:
        - pull_request
      branch_patterns:
        - pattern: sprint*
          include: true
          source: false
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/app/android/local.properties"
      - cd app && flutter packages pub get
      - |
        #!/bin/sh
        echo $FIREBASE | base64 --decode > $FCI_BUILD_DIR/app/android/app/google-services.json
      - cd app && flutter build apk --debug
    artifacts:
      - app/build/**/outputs/**/*.apk
      - app/build/**/outputs/**/*.aab
      - app/build/**/outputs/**/mapping.txt
      - app/flutter_drive.log
